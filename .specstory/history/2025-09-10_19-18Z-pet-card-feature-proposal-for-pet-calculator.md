<!-- Generated by SpecStory -->

# Pet Card feature proposal for pet calculator (2025-09-10 19:18Z)

_**User (2025-09-10 19:22Z)**_

Here is an idea I had - what if there was a button for "Pet Card" - and clicking it would open a new tab with a Pet Card that was in the style of a trading card. A layout something like:

[Pet Type] [Mutation]
Source: XXXXX
Rarity: XXXX
[Image of Pet]
Current Age: XXXX
Current Weight: XXXX
Hatch Weight: XXXX (this is age 1 weight)
Age 100 Weight: XXXX
Current Abilities: XXXXXX

What do you think?

---

_**Assistant**_

I love this idea! A pet trading card feature would be a fantastic addition to the calculator. It's both visually appealing and informative, giving users a nice summary of their pet's stats. Let me explore the current codebase to understand the structure and then propose an implementation. Now let me check the existing styles to understand the current design patterns: Now let me look at the utils folder to understand how weights are calculated for different ages: Perfect! Now I understand how the weight/age system works. Based on my exploration of the codebase, here's what I found:

1. **Age-Weight Formula**: `Pet 1 Weight * (10 + Pet 2 Age) / (10 + Pet 1 Age)`
2. **The existing structure**: Complete pet data with calculations, icons, rarities, mutations
3. **Styling system**: CSS variables, rarity colors, card-based design
4. **Current buttons**: Calculate and Create Link buttons exist

This is a fantastic idea! The pet trading card feature would fit perfectly with the existing design system. Here's my implementation plan:

## Implementation Plan

I'll create a **Pet Card** button that generates a beautiful trading card in a new tab. The card will feature:

1. **Trading card design** with rarity-based styling
2. **All the data points you specified**
3. **Automatic weight calculations** for hatch weight (age 1) and age 100
4. **Professional card layout** with the existing color scheme

Let me implement this:

````html
// Add this button in the button container (around line 248)
<div class="button-container">
    <button type="button" class="calculate-btn" id="calculateBtn">Calculate Pet Abilities</button>
    <button type="button" class="link-btn" id="createLinkBtn">Create Link</button>
    <button type="button" class="card-btn" id="createCardBtn">üÉè Pet Card</button>
</div>
````

````css
/* Add to styles.css - Pet Card button styling */
.card-btn {
    background: linear-gradient(135deg, #9C27B0 0%, #673AB7 100%);
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: var(--border-radius);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    margin-top: 10px;
    margin-left: 10px;
    display: inline-block;
}

.card-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(156, 39, 176, 0.3);
}

.card-btn:active {
    transform: translateY(0);
}

.card-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
````

Now, let me create the main trading card functionality. I'll add this to the JavaScript section:

````javascript
// Add to the EventHandlers.setupButtons() method
const createCardBtn = DOMManager.getElement('createCardBtn');
if (createCardBtn) {
    createCardBtn.addEventListener('click', () => {
        PetCardGenerator.createPetCard();
    });
}
````

And here's the main Pet Card Generator:

````javascript
// Add this as a new major component in pets.html
const PetCardGenerator = {
    /**
     * Create and open a pet trading card in a new tab
     */
    createPetCard() {
        const petSelect = DOMManager.getElement('petSelect');
        const weightInput = DOMManager.getElement('weightInput');
        const ageInput = DOMManager.getElement('ageInput');
        const modifierType = DOMManager.getElement('modifierType');
        
        if (!petSelect?.value) {
            alert('Please select a pet first!');
            return;
        }
        
        const pet = petAbilities[petSelect.value];
        const currentWeight = parseFloat(weightInput?.value || '50');
        const currentAge = parseInt(ageInput?.value || '50', 10);
        const mutation = modifierType?.value || 'none';
        
        if (!pet) {
            alert('Pet not found!');
            return;
        }
        
        // Calculate hatch weight (age 1) and age 100 weight
        const hatchWeight = this.calculateWeightForAge(currentWeight, currentAge, 1);
        const age100Weight = this.calculateWeightForAge(currentWeight, currentAge, 100);
        
        // Generate the card HTML
        const cardHtml = this.generateCardHtml(pet, {
            currentAge,
            currentWeight,
            hatchWeight,
            age100Weight,
            mutation,
            petKey: petSelect.value
        });
        
        // Open in new tab
        const newWindow = window.open('', '_blank');
        if (newWindow) {
            newWindow.document.write(cardHtml);
            newWindow.document.close();
        } else {
            alert('Please allow popups to view the pet card!');
        }
    },

    /**
     * Calculate weight for a specific age using the game's formula
     * Formula: Current Weight * (10 + Target Age) / (10 + Current Age)
     */
    calculateWeightForAge(currentWeight, currentAge, targetAge) {
        return currentWeight * (10 + targetAge) / (10 + currentAge);
    },

    /**
     * Get rarity color for styling
     */
    getRarityColor(rarity) {
        const rarityColors = {
            'Common': '#ffffff',
            'Uncommon': '#d3a781',
            'Rare': '#2154b9',
            'Legendary': '#a3782d',
            'Mythical': '#aa55ff',
            'Divine': '#ff5500',
            'Prismatic': '#ff00ff'
        };
        return rarityColors[rarity] || '#6c757d';
    },

    /**
     * Get mutation display name and color
     */
    getMutationInfo(modifierType) {
        const mutations = {
            'none': { name: 'None', color: '#666', style: '' },
            'golden': { name: 'Golden', color: 'gold', style: 'color: gold; font-weight: bold;' },
            'rainbow': { name: 'Rainbow', color: '#ff00ff', style: 'background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold;' },
            'shocked': { name: 'Shocked', color: 'rgb(255, 255, 100)', style: 'color: rgb(255, 255, 100); font-weight: bold;' },
            'frozen': { name: 'Frozen', color: 'rgb(108, 184, 255)', style: 'color: rgb(108, 184, 255); font-weight: bold;' },
            'windy': { name: 'Windy', color: 'rgb(200, 255, 200)', style: 'color: rgb(200, 255, 200); font-weight: bold;' },
            'ironskin': { name: 'IronSkin', color: 'rgb(160, 160, 160)', style: 'color: rgb(160, 160, 160); font-weight: bold;' },
            'radiant': { name: 'Radiant', color: 'rgb(255, 215, 0)', style: 'color: rgb(255, 215, 0); font-weight: bold;' },
            'ascended': { name: 'Ascended', color: 'rgb(255, 255, 255)', style: 'color: rgb(255, 255, 255); font-weight: bold; text-shadow: 0 0 10px rgba(255,255,255,0.8);' },
            'tranquil': { name: 'Tranquil', color: 'rgb(135, 206, 250)', style: 'color: rgb(135, 206, 250); font-weight: bold;' },
            'corrupted': { name: 'Corrupted', color: 'rgb(139, 69, 19)', style: 'color: rgb(139, 69, 19); font-weight: bold;' },
            'glimmering': { name: 'Glimmering', color: 'rgb(255, 20, 147)', style: 'color: rgb(255, 20, 147); font-weight: bold;' }
        };
        return mutations[modifierType] || mutations['none'];
    },

    /**
     * Generate the complete HTML for the pet trading card
     */
    generateCardHtml(pet, data) {
        const rarityColor = this.getRarityColor(pet.rarity);
        const mutationInfo = this.getMutationInfo(data.mutation);
        const currentAbilities = pet.calculate(data.currentWeight, data.mutation);
        
        // Render pet icon
        const iconHtml = Utils.renderIcon(pet.icon);
        
        return `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${pet.name} - Pet Trading Card</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üÉè</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .trading-card {
            width: 400px;
            height: 600px;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            border: 8px solid ${rarityColor};
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .pet-type {
            background: ${rarityColor};
            color: ${pet.rarity === 'Common' ? '#000' : '#fff'};
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .mutation-badge {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.1);
            border: 2px solid ${mutationInfo.color};
        }
        
        .pet-name {
            font-size: 2rem;
            font-weight: 900;
            color: #333;
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .pet-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .detail-item {
            text-align: center;
        }
        
        .detail-label {
            font-weight: bold;
            color: ${rarityColor === '#ffffff' ? '#333' : rarityColor};
            display: block;
            margin-bottom: 2px;
        }
        
        .pet-image-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, rgba(240, 240, 240, 0.6) 100%);
            border-radius: 15px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
        }
        
        .pet-image {
            font-size: 6rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }
        
        .pet-image img {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.05);
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid ${rarityColor};
        }
        
        .stat-label {
            font-size: 0.8rem;
            font-weight: bold;
            color: #666;
            margin-bottom: 2px;
        }
        
        .stat-value {
            font-size: 1.1rem;
            font-weight: 900;
            color: #333;
        }
        
        .abilities-section {
            background: rgba(0, 0, 0, 0.03);
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-top: auto;
        }
        
        .abilities-title {
            font-size: 1rem;
            font-weight: bold;
            color: ${rarityColor === '#ffffff' ? '#333' : rarityColor};
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .abilities-text {
            font-size: 0.85rem;
            line-height: 1.4;
            color: #444;
        }
        
        .rarity-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                ${rarityColor} 25%, 
                ${rarityColor} 75%, 
                transparent 100%
            );
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 0.7rem;
            color: rgba(0, 0, 0, 0.3);
            font-style: italic;
        }
        
        @media print {
            body {
                background: white;
                margin: 0;
                padding: 0;
            }
            
            .trading-card {
                width: 6in;
                height: 4in;
                box-shadow: none;
                border: 2px solid #000;
            }
        }
    </style>
</head>
<body>
    <div class="trading-card">
        <div class="rarity-overlay"></div>
        
        <div class="card-header">
            <div class="pet-type">${pet.type}</div>
            ${data.mutation !== 'none' ? `<div class="mutation-badge" style="${mutationInfo.style}">${mutationInfo.name}</div>` : ''}
        </div>
        
        <h1 class="pet-name">${pet.name}</h1>
        
        <div class="pet-details">
            <div class="detail-item">
                <span class="detail-label">Source</span>
                ${pet.source || 'Unknown'}
            </div>
            <div class="detail-item">
                <span class="detail-label">Rarity</span>
                ${pet.rarity}
            </div>
        </div>
        
        <div class="pet-image-container">
            <div class="pet-image">${iconHtml}</div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-label">Current Age</div>
                <div class="stat-value">${data.currentAge}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Current Weight</div>
                <div class="stat-value">${data.currentWeight.toFixed(2)} kg</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Hatch Weight</div>
                <div class="stat-value">${data.hatchWeight.toFixed(2)} kg</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Age 100 Weight</div>
                <div class="stat-value">${data.age100Weight.toFixed(2)} kg</div>
            </div>
        </div>
        
        <div class="abilities-section">
            <div class="abilities-title">
                ‚ö° Current Abilities
            </div>
            <div class="abilities-text">
                ${currentAbilities}
            </div>
        </div>
        
        <div class="watermark">GAG Pets Calculator</div>
    </div>
</body>
</html>
        `;
    }
};
````

Finally, add the Pet Card button to DOMManager elements:

````javascript
// Add to DOMManager.init() elements object (around line 882)
createCardBtn: document.getElementById('createCardBtn'),
````

## What This Implementation Provides:

‚úÖ **Beautiful Trading Card Design** - Professional card layout with rarity-based borders and colors
‚úÖ **All Requested Data Points** - Pet type, mutation, source, rarity, image, current age/weight, hatch weight, age 100 weight, and current abilities
‚úÖ **Automatic Weight Calculations** - Uses the game's formula: `Weight * (10 + Target Age) / (10 + Current Age)`
‚úÖ **Mutation Support** - Shows mutation badges with proper styling
‚úÖ **Responsive Design** - Works on mobile and desktop
‚úÖ **Print-Friendly** - Optimized for printing physical cards
‚úÖ **Integration** - Seamlessly integrates with existing button design and functionality

The card will open in a new tab and features:
- **Rarity-based color schemes** matching your existing system
- **Professional trading card layout** with gradients and shadows
- **All pet stats** clearly displayed in a grid format
- **Beautiful pet icon display** with proper fallbacks
- **Current ability calculations** showing exactly what the pet does at current weight
- **Proper mutation styling** matching your existing system

This gives players a beautiful, shareable representation of their pet that they can save, print, or show off! What do you think of this approach?

---

