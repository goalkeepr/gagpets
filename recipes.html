<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NCYNBT0YWW"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NCYNBT0YWW');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Browse recipes and their ingredient requirements in Grow a Garden game">
    <meta name="keywords" content="Grow a Garden, recipes, cooking, ingredients, requirements">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç≥</text></svg>">
    <title>Grow a Garden - Recipes</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Additional styles specific to recipes page */
    <style>
        /* Additional styles specific to recipes page */
        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .recipe-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 6px var(--shadow-light);
            border-left: 5px solid var(--border-color);
        }

        .recipe-card:hover {
            box-shadow: 0 8px 20px var(--shadow-light);
            transform: translateY(-2px);
        }

        .recipe-card.selected {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 8px 25px var(--shadow-light);
        }

        /* Recipe type specific colors */
        .recipe-card[data-category="main"] { border-left-color: rgb(231, 76, 60); }
        .recipe-card[data-category="main"]:hover { border-color: rgb(231, 76, 60); }
        .recipe-card[data-category="main"].selected { background: rgba(231, 76, 60, 0.1); border-color: rgb(231, 76, 60); }

        .recipe-card[data-category="snack"] { border-left-color: rgb(241, 196, 15); }
        .recipe-card[data-category="snack"]:hover { border-color: rgb(241, 196, 15); }
        .recipe-card[data-category="snack"].selected { background: rgba(241, 196, 15, 0.1); border-color: rgb(241, 196, 15); }

        .recipe-card[data-category="dessert"] { border-left-color: rgb(155, 89, 182); }
        .recipe-card[data-category="dessert"]:hover { border-color: rgb(155, 89, 182); }
        .recipe-card[data-category="dessert"].selected { background: rgba(155, 89, 182, 0.1); border-color: rgb(155, 89, 182); }

        .recipe-card[data-category="drink"] { border-left-color: rgb(52, 152, 219); }
        .recipe-card[data-category="drink"]:hover { border-color: rgb(52, 152, 219); }
        .recipe-card[data-category="drink"].selected { background: rgba(52, 152, 219, 0.1); border-color: rgb(52, 152, 219); }

        .recipe-card[data-category="salad"] { border-left-color: rgb(46, 204, 113); }
        .recipe-card[data-category="salad"]:hover { border-color: rgb(46, 204, 113); }
        .recipe-card[data-category="salad"].selected { background: rgba(46, 204, 113, 0.1); border-color: rgb(46, 204, 113); }

        .recipe-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .recipe-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
            margin: 0;
        }

        /* Recipe name colors to match their category */
        .recipe-card[data-category="main"] .recipe-name { color: rgb(231, 76, 60); }
        .recipe-card[data-category="snack"] .recipe-name { color: rgb(241, 196, 15); }
        .recipe-card[data-category="dessert"] .recipe-name { color: rgb(155, 89, 182); }
        .recipe-card[data-category="drink"] .recipe-name { color: rgb(52, 152, 219); }
        .recipe-card[data-category="salad"] .recipe-name { color: rgb(46, 204, 113); }

        .ingredient-count {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Ingredient count badge colors to match their category */
        .recipe-card[data-category="main"] .ingredient-count { background: rgb(231, 76, 60); }
        .recipe-card[data-category="snack"] .ingredient-count { background: rgb(241, 196, 15); color: black; }
        .recipe-card[data-category="dessert"] .ingredient-count { background: rgb(155, 89, 182); }
        .recipe-card[data-category="drink"] .ingredient-count { background: rgb(52, 152, 219); }
        .recipe-card[data-category="salad"] .ingredient-count { background: rgb(46, 204, 113); }

        .ingredient-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .ingredient-tag {
            background: var(--bg-light);
            color: var(--text-secondary);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            border: 1px solid var(--border-color);
            font-weight: 500;
        }

        .recipe-details {
            margin-top: 30px;
            padding: 25px;
            background: rgba(76, 175, 80, 0.05);
            border-radius: var(--border-radius);
            border-left: 5px solid var(--primary-color);
            display: none;
        }

        .recipe-details.show {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        .recipe-details h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .ingredient-section {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .ingredient-section h4 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .ingredient-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .ingredient-item {
            background: var(--bg-light);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .ingredient-item:hover {
            border-color: var(--primary-color);
            background: rgba(76, 175, 80, 0.1);
        }

        .ingredient-item.special {
            background: rgba(52, 152, 219, 0.1);
            border-color: rgb(52, 152, 219);
            color: rgb(52, 152, 219);
            font-style: italic;
        }

        .ingredient-item.from-type {
            background: rgba(46, 204, 113, 0.1);
            border-color: rgb(46, 204, 113);
            color: rgb(46, 204, 113);
            font-size: 0.85rem;
        }

        .type-summary {
            padding: 10px;
            background: rgba(52, 152, 219, 0.05);
            border-radius: 6px;
            border: 1px dashed rgb(52, 152, 219);
        }

        .type-summary .ingredient-item {
            margin: 4px;
            display: inline-block;
            font-weight: 600;
        }

        .expandable-section {
            margin-top: 10px;
        }

        .expand-toggle {
            background: none;
            border: none;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
            padding: 0;
            margin-top: 8px;
        }

        .expand-toggle:hover {
            color: var(--primary-color);
            opacity: 0.8;
        }

        .search-section {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-btn[data-category="main"] { border-color: rgb(231, 76, 60); color: rgb(231, 76, 60); }
        .filter-btn[data-category="main"].active { background: rgb(231, 76, 60); border-color: rgb(231, 76, 60); color: white; }

        .filter-btn[data-category="snack"] { border-color: rgb(241, 196, 15); color: rgb(241, 196, 15); }
        .filter-btn[data-category="snack"].active { background: rgb(241, 196, 15); border-color: rgb(241, 196, 15); color: black; }

        .filter-btn[data-category="dessert"] { border-color: rgb(155, 89, 182); color: rgb(155, 89, 182); }
        .filter-btn[data-category="dessert"].active { background: rgb(155, 89, 182); border-color: rgb(155, 89, 182); color: white; }

        .filter-btn[data-category="drink"] { border-color: rgb(52, 152, 219); color: rgb(52, 152, 219); }
        .filter-btn[data-category="drink"].active { background: rgb(52, 152, 219); border-color: rgb(52, 152, 219); color: white; }

        .filter-btn[data-category="salad"] { border-color: rgb(46, 204, 113); color: rgb(46, 204, 113); }
        .filter-btn[data-category="salad"].active { background: rgb(46, 204, 113); border-color: rgb(46, 204, 113); color: white; }

        .stats-bar {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            padding: 20px;
            background: var(--bg-light);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .stat-number {
            display: block;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .recipe-emoji {
            font-size: 1.5rem;
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            .recipe-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-buttons {
                justify-content: center;
            }
            
            .stats-bar {
                padding: 15px;
            }
            
            .stat-item {
                min-width: 100px;
            }
        }

        /* Highlight matching text in search */
        .search-highlight {
            background: yellow;
            padding: 1px 2px;
            border-radius: 2px;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .difficulty-easy { background: rgb(46, 204, 113); color: white; }
        .difficulty-medium { background: rgb(241, 196, 15); color: black; }
        .difficulty-hard { background: rgb(231, 76, 60); color: white; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç≥ Grow a Garden</h1>
            <p>Recipe Guide & Ingredient Requirements</p>
            <button type="button" id="darkModeToggle" class="dark-mode-toggle" aria-label="Toggle dark mode">
                <span class="toggle-icon">üåô</span>
            </button>
        </div>
        
        <div class="navigation-links">
            <a href="pets.html">üêæ Pets</a>
            <a href="fruittypes.html">üçé Fruit Types</a>
        </div>
        
        <div class="calculator">
            <div class="search-section">
                <input type="text" class="search-input" id="searchInput" placeholder="Search recipes or ingredients...">
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">All Recipes</button>
                    <button class="filter-btn" data-category="main">üçΩÔ∏è Main Dishes</button>
                    <button class="filter-btn" data-category="snack">ü•™ Snacks</button>
                    <button class="filter-btn" data-category="dessert">üç∞ Desserts</button>
                    <button class="filter-btn" data-category="drink">ü•§ Drinks</button>
                    <button class="filter-btn" data-category="salad">ü•ó Salads</button>
                </div>
                
                <div class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-number" id="totalRecipes">0</span>
                        <div class="stat-label">Total Recipes</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="selectedRecipe">None</span>
                        <div class="stat-label">Selected Recipe</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="filteredCount">0</span>
                        <div class="stat-label">Showing</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="avgIngredients">0</span>
                        <div class="stat-label">Avg. Ingredients</div>
                    </div>
                </div>
            </div>

            <div class="recipe-grid" id="recipeGrid">
                <!-- Recipe cards will be populated here -->
            </div>

            <div class="recipe-details" id="recipeDetails">
                <h3 id="detailsTitle">Select a recipe to see ingredients</h3>
                <div id="ingredientSections">
                    <!-- Ingredient sections will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        'use strict';
        
        // Fruit types data for expanding special ingredient requirements
        const fruitTypesData = {
	Berry: ["Blueberry", "Cranberry", "Grape", "Raspberry", "Strawberry", "Celestiberry", "White Mulberry", "Lingonberry", "Elder Strawberry", "Willowberry"],
	Root: ["Carrot", "Mutant Carrot", "Chocolate Carrot", "Wild Carrot", "Taro Flower", "Potato", "Mandrake", "Rhubarb", "Onion", "Tall Asparagus", "Horsetail", "Spring Onion"],
	Candy: ["Blue Lollipop", "Candy Blossom", "Candy Sunflower", "Chocolate Carrot", "Easter Egg", "Red Lollipop", "Sugarglaze"],
	Flower: ["Candy Blossom", "Candy Sunflower", "Cherry Blossom", "Crocus", "Daffodil", "Lotus", "Orange Tulip", "Pink Tulip", "Nightshade", "Moonflower", "Moon Blossom", "Rose", "Foxglove", "Lilac", "Pink Lily", "Purple Dahlia", "Sunflower", "Lavender", "Honeysuckle", "Manuka Flower", "Ember Lily", "Noble Flower", "Bee Balm", "Succulent", "Parasol Flower", "Rosy Delight", "Lily of the Valley", "Burning Bud", "Rafflesia", "Stonebite", "Liberty Lily", "Firework Flower", "Grand Volcania", "Serenity", "Monoblooma", "Hinomai", "Taro Flower", "Zenflare", "Soft Sunshine", "Dezen", "Artichoke", "Veinpetal", "Cyclamen", "Flare Daisy", "Sakura Bush", "Dandelion", "Peace Lily", "Delphinium", "Bone Blossom", "Tranquil Bloom", "Paradise Petal", "Crown of Thorns", "Calla Lily", "Cyclamen"],
	Fruit: ["Apple", "Avocado", "Banana", "Blueberry", "Coconut", "Cranberry", "Dragon Fruit", "Durian", "Grape", "Lemon", "Lime", "Mango", "Papaya", "Passionfruit", "Peach", "Pear", "Pineapple", "Raspberry", "Strawberry", "Watermelon", "Starfruit", "Blood Banana", "Moon Melon", "Celestiberry", "Moon Mango", "Nectarine", "Hive Fruit", "Green Apple", "Sugar Apple", "Traveler's Fruit", "Loquat", "Kiwi", "White Mulberry", "Lingonberry", "Maple Apple", "Spiked Mango", "Crown Melon", "Grand Tomato", "Pricklefruit", "Mangosteen", "Canary Melon", "Tomato", "Cantaloupe", "Pumpkin", "Eggplant", "Feijoa", "Prickly Pear", "Guanabana", "Bitter Melon", "Corn", "Violet Corn", "Elder Strawberry", "Willowberry", "Carrot"],
	Leafy: ["Apple", "Blueberry", "Cranberry", "Eggplant", "Grape", "Mango", "Peach", "Pineapple", "Pumpkin", "Raspberry", "Strawberry", "Tomato", "Watermelon", "Cantaloupe", "Cacao", "Beanstalk", "Coolcool Beanbeanstalk", "Mint", "Moonflower", "Starfruit", "Moonglow", "Moon Blossom", "Blood Banana", "Celestiberry", "Moon Mango", "Rose", "Foxglove", "Lilac", "Pink Lily", "Purple Dahlia", "Sunflower", "Nectarine", "Hive Fruit", "Lumira", "Honeysuckle", "Noble Flower", "Bee Balm", "Green Apple", "Sugar Apple", "Parasol Flower", "Elephant Ears", "Traveler's Fruit", "Rosy Delight", "Cauliflower", "Aloe Vera", "Lily of the Valley", "Pitcher Plant", "Rafflesia", "Firefly Fern", "Giant Pinecone", "Serenity", "Soft Sunshine", "Dragon Sapling", "Maple Apple", "Spiked Mango", "Sakura Bush", "Grand Tomato", "Artichoke", "Twisted Tangle", "Log Pumpkin", "Mandrake", "Cyclamen", "Mangosteen", "Princess Thorn", "Romanesco", "Purple Cabbage", "King Cabbage", "Spirit Lantern", "Glowpod", "Shimmersprout", "Willowberry"],
	Sour: ["Cranberry", "Lemon", "Lime", "Passionfruit", "Starfruit", "Mangosteen", "Flare Melon", "Mangosteen", "Kiwi"],
	Sweet: ["Banana", "Blue Lollipop", "Blueberry", "Candy Blossom", "Candy Sunflower", "Chocolate Carrot", "Easter Egg", "Grape", "Mango", "Peach", "Pear", "Pineapple", "Raspberry", "Red Lollipop", "Strawberry", "Watermelon", "Starfruit", "Nectar Thorn", "Sugar Apple", "Moon Melon", "Spiked Mango", "Sugarglaze", "Crown Melon", "Mangosteen", "Canary Melon", "Romanesco"],
	Tropical: ["Banana", "Coconut", "Dragon Fruit", "Durian", "Mango", "Papaya", "Passionfruit", "Pineapple", "Watermelon", "Parasol Flower", "Cocovine", "Starfruit"],
	Vegetable: ["Carrot", "Wild Carrot", "Chocolate Carrot", "Corn", "Violet Corn", "Eggplant", "Pepper", "Pumpkin", "Purple Cabbage", "Tomato", "Beanstalk", "Coolcool Beanbeanstalk", "Mint", "Dragon Pepper", "Cauliflower", "Bell Pepper", "Taro Flower", "Artichoke", "Onion", "Jalapeno", "Tall Asparagus", "Grand Tomato", "Log Pumpkin", "Badlands Pepper", "Rhubarb", "King Cabbage", "Bitter Melon", "Mandrake", "Mutant Carrot", "Romanesco", "Snaparino Beanarini"],
	Woody: ["Apple", "Sugar Apple", "Avocado", "Cacao", "Coconut", "Durian", "Mango", "Papaya", "Peach", "Pear", "Moon Blossom", "Moon Mango", "Nectarine", "Hive Fruit", "Cocovine", "Traveler's Fruit", "Kiwi", "Feijoa", "Giant Pinecone", "Dragon Sapling", "Maple Apple", "Spiked Mango", "Sakura Bush", "Rhubarb", "Duskpuff", "Mangosteen", "Gleamroot", "Amberheart", "Bamboo", "Lucky Bamboo", "Bendboo", "Boneboo", "Glowpod", "Willowberry"],
	Prickly: ["Cactus", "Dragon Fruit", "Durian", "Pineapple", "Venus Fly Trap", "Celestiberry", "Nectar Thorn", "Prickly Pear", "Aloe Vera", "Horned Dinoshroom", "Spiked Mango", "Twisted Tangle", "Pricklefruit", "Princess Thorn", "Crown of Thorns"],
	Toxic: ["Foxglove", "Nightshade", "Rafflesia", "Pitcher Plant", "Horned Dinoshroom", "Sinisterdrip", "Cursed Fruit", "Amber Spine"],
	Fungus: ["Mega Mushroom", "Mushroom", "Glowshroom", "Nectarshade", "Horned Dinoshroom", "Sinisterdrip", "Duskpuff"],
	Night: ["Blood Banana", "Moon Melon", "Nightshade", "Glowshroom", "Mint", "Moonflower", "Starfruit", "Moonglow", "Moon Blossom", "Moon Mango", "Celestiberry", "Aura Flora", "Gleamroot", "Glowpod", "Shimmersprout"],
	Spicy: ["Cursed Fruit", "Ember Lily", "Pepper", "Dragon Pepper", "Cacao", "Horned Dinoshroom", "Grand Volcania", "Jalapeno", "Badlands Pepper", "Taco Fern"],
	Stalky: ["Beanstalk", "Coolcool Beanbeanstalk", "Burning Bud", "Bamboo", "Dandelion", "Mushroom", "Bendboo", "Lotus", "Elephant Ears", "Lily of the Valley", "Pitcher Plant", "Stonebite", "Firefly Fern", "Horned Dinoshroom", "Grand Volcania", "Soft Sunshine", "Hinomai", "Sinisterdrip", "Lucky Bamboo", "Sugarglaze", "Tall Asparagus", "Veinpetal", "Pricklefruit", "Spring Onion", "Mutant Carrot", "Poseidon Plant", "Corn", "Violet Corn", "Mega Mushroom", "Glowshroom", "Spectralis", "Spirit Lantern", "Flare Melon", "Snaparino Beanarino"],
	Summer: ["Carrot", "Strawberry", "Blueberry", "Tomato", "Watermelon", "Rafflesia", "Cauliflower", "Green Apple", "Avocado", "Banana", "Pineapple", "Kiwi", "Bell Pepper", "Prickly Pear", "Loquat", "Feijoa", "Pitcher Plant", "Sugar Apple", "Wild Carrot", "Pear", "Cantaloupe", "Parasol Flower", "Rosy Delight", "Elephant Ears", "Delphinium", "Lily of the Valley", "Traveler's Fruit", "Peace Lily", "Aloe Vera", "Guanabana", "Butternut Squash"],
	Prehistoric: ["Stonebite", "Paradise Petal", "Horned Dinoshroom", "Boneboo", "Firefly Fern", "Fossilight", "Bone Blossom", "Horsetail", "Lingonberry", "Amber Spine", "Grand Volcania"],
	Zen: ["Monoblooma", "Serenity", "Taro Flower", "Zen Rocks", "Hinomai", "Maple Apple", "Zenflare", "Soft Sunshine", "Spiked Mango", "Sakura Bush", "Enkaku", "Dezen", "Lucky Bamboo", "Tranquil Bloom"]

        };
        
        // Recipe data with categorization and emojis
        const recipeData = {
            "Burger": {
                "emoji": "üçî",
                "category": "main",
                "difficulty": "medium",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Meat": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"],
                        "Leafy": ["Tomato", "Bamboo", "Taro Flower", "Sunflower", "Avocado", "Pineapple", "Bell Pepper", "Onion", "Jalapeno", "Grand Tomato", "Artichoke"]
                    }
                }
            },
            "Soup": {
                "emoji": "üç≤",
                "category": "main",
                "difficulty": "easy",
                "Requires": {
                    "Count": 1,
                    "Ingredients": {
                        "Base": ["Any single ingredient"]
                    }
                }
            },
            "Corndog": {
                "emoji": "üå≠",
                "category": "snack",
                "difficulty": "medium",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Stick": ["'Woody' type plant"],
                        "Meat": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"],
                        "Batter": ["Corn", "Violet Corn"]
                    }
                }
            },
            "HotDog": {
                "emoji": "üå≠",
                "category": "snack",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Meat": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"]
                    }
                }
            },
            "Sandwich": {
                "emoji": "ü•™",
                "category": "snack",
                "difficulty": "medium",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Leafy": ["Tomato", "Bamboo", "Taro Flower", "Sunflower", "Avocado", "Pineapple", "Bell Pepper", "Onion", "Jalapeno", "Grand Tomato", "Artichoke"],
                        "Tomato": ["Tomato", "Grand Tomato"]
                    }
                }
            },
            "Salad": {
                "emoji": "ü•ó",
                "category": "salad",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Leafy": ["Tomato", "Bamboo", "Taro Flower", "Sunflower", "Avocado", "Pineapple", "Bell Pepper", "Onion", "Jalapeno", "Grand Tomato", "Artichoke"],
                        "Vegetable": ["'Vegetable' type plant"]
                    }
                }
            },
            "Pie": {
                "emoji": "ü•ß",
                "category": "dessert",
                "difficulty": "medium",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Pastry": ["Coconut", "Pumpkin", "Crown Melon", "Sugarglaze"],
                        "Filling": ["'Vegetable' type plant", "Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"]
                    }
                }
            },
            "Waffle": {
                "emoji": "üßá",
                "category": "dessert",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Pastry": ["Coconut", "Pumpkin", "Crown Melon", "Sugarglaze"],
                        "Sweet": ["'Sweet' type plant"]
                    }
                }
            },
            "Pizza": {
                "emoji": "üçï",
                "category": "main",
                "difficulty": "hard",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Meat": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"],
                        "Vegetable": ["'Vegetable' type plant"],
                        "Sauce": ["'Fruit' type plant"]
                    }
                }
            },
            "Sushi": {
                "emoji": "üç£",
                "category": "main",
                "difficulty": "hard",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Bamboo": ["Bamboo"],
                        "Wrap": ["Tomato", "Bamboo", "Taro Flower", "Sunflower", "Avocado", "Pineapple", "Bell Pepper", "Onion", "Jalapeno", "Grand Tomato", "Artichoke"],
                        "Main": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern", "'Vegetable' type plant"],
                        "Rice": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze", "Coconut"]
                    }
                }
            },
            "Donut": {
                "emoji": "üç©",
                "category": "dessert",
                "difficulty": "medium",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Icing": ["'Sweet' type plant"],
                        "Sprinkles": ["'Sweet' type plant"]
                    }
                }
            },
            "IceCream": {
                "emoji": "üç¶",
                "category": "dessert",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Cone": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Cream": ["'Sweet' type plant"]
                    }
                }
            },
            "Cake": {
                "emoji": "üéÇ",
                "category": "dessert",
                "difficulty": "hard",
                "Requires": {
                    "Count": 4,
                    "Ingredients": {
                        "Bread": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Icing": ["'Sweet' type plant"],
                        "Filling": ["'Sweet' type plant"],
                        "Fruit": ["'Fruit' type plant"]
                    }
                }
            },
            "Smoothie": {
                "emoji": "ü•§",
                "category": "drink",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Fruit": ["'Fruit' type plant"]
                    }
                }
            },
            "Porridge": {
                "emoji": "ü•£",
                "category": "main",
                "difficulty": "medium",
                "Requires": {
                    "Count": 3,
                    "Ingredients": {
                        "Base": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Cream": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Fruit": ["'Fruit' type plant"]
                    }
                }
            },
            "Spaghetti": {
                "emoji": "üçù",
                "category": "main",
                "difficulty": "hard",
                "Requires": {
                    "Count": 4,
                    "Ingredients": {
                        "Pasta": ["Corn", "Violet Corn", "Cauliflower", "Banana", "Sugarglaze"],
                        "Sauce": ["Tomato", "Grand Tomato"],
                        "Meat": ["Pepper", "Bell Pepper", "Ember Lily", "Cactus", "Mushroom", "Eggplant", "Venus Fly Trap", "Glowshroom", "Bone Blossom", "Tall Asparagus", "Taco Fern"],
                        "Vegetables": ["'Vegetable' type plant"]
                    }
                }
            },
            "CandyApple": {
                "emoji": "üçé",
                "category": "dessert",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "Apple": ["Apple", "Green Apple", "Sugar Apple", "Maple Apple"],
                        "CandyCoating": ["'Sweet' type plant"]
                    }
                }
            },
            "SweetTea": {
                "emoji": "üßã",
                "category": "drink",
                "difficulty": "easy",
                "Requires": {
                    "Count": 2,
                    "Ingredients": {
                        "HerbalBase": ["Candy Blossom", "Candy Sunflower", "Cherry Blossom", "Crocus", "Daffodil", "Lotus", "Orange Tulip", "Pink Tulip", "Moonflower", "Moon Blossom", "Rose", "Lilac", "Pink Lily", "Purple Dahlia", "Sunflower", "Lavender", "Honeysuckle", "Manuka Flower", "Ember Lily", "Noble Flower", "Bee Balm", "Succulent", "Parasol Flower", "Rosy Delight", "Lily of the Valley", "Burning Bud", "Stonebite", "Liberty Lily", "Firework Flower", "Grand Volcania", "Serenity", "Monoblooma", "Soft Sunshine", "Hinomai", "Taro Flower", "Zenflare", "Soft Sunshine", "Dezen", "Artichoke", "Veinpetal", "Cyclamen", "Flare Daisy", "Mint"],
                        "Sweetener": ["'Sweet' type plant"]
                    }
                }
            }
        };

        // Application state
        const AppState = {
            selectedRecipe: null,
            searchTerm: '',
            selectedCategory: 'all',
            filteredRecipes: Object.keys(recipeData)
        };

        // Utility functions
        const Utils = {
            /**
             * Highlight search terms in text
             */
            highlightText(text, searchTerm) {
                if (!searchTerm) return text;
                const regex = new RegExp(`(${searchTerm})`, 'gi');
                return text.replace(regex, '<span class="search-highlight">$1</span>');
            },

            /**
             * Get total ingredient count for a recipe
             */
            getIngredientCount(recipe) {
                const ingredients = recipe.Requires.Ingredients || {};
                return Object.keys(ingredients).length;
            },

            /**
             * Check if ingredient is a special type (e.g., 'Sweet' type plant)
             */
            isSpecialIngredient(ingredient) {
                return ingredient.includes("'") && ingredient.includes("type plant");
            },

            /**
             * Extract type name from special ingredient string
             */
            extractTypeName(ingredient) {
                const match = ingredient.match(/'([^']+)' type plant/);
                return match ? match[1] : null;
            },

            /**
             * Expand special type ingredients to show actual plants
             */
            expandIngredientList(ingredientList) {
                const expanded = [];
                
                ingredientList.forEach(ingredient => {
                    if (Utils.isSpecialIngredient(ingredient)) {
                        const typeName = Utils.extractTypeName(ingredient);
                        if (typeName && fruitTypesData[typeName]) {
                            // Add all plants of this type
                            expanded.push(...fruitTypesData[typeName]);
                        } else {
                            // Keep original if we can't find the type
                            expanded.push(ingredient);
                        }
                    } else {
                        expanded.push(ingredient);
                    }
                });
                
                // Remove duplicates and sort
                return [...new Set(expanded)].sort();
            },

            /**
             * Get difficulty badge HTML
             */
            getDifficultyBadge(difficulty) {
                return `<span class="difficulty-badge difficulty-${difficulty}">${difficulty.toUpperCase()}</span>`;
            },

            /**
             * Calculate average ingredient count
             */
            getAverageIngredientCount() {
                const counts = Object.values(recipeData).map(recipe => Utils.getIngredientCount(recipe));
                const avg = counts.reduce((sum, count) => sum + count, 0) / counts.length;
                return Math.round(avg * 10) / 10; // Round to 1 decimal place
            },

            /**
             * Check if an ingredient list contains type-based ingredients
             */
            hasTypeIngredients(ingredientList) {
                return ingredientList.some(ingredient => Utils.isSpecialIngredient(ingredient));
            },

            /**
             * Get a summary of type-based ingredients for preview
             */
            getTypeSummary(ingredientList) {
                const types = [];
                ingredientList.forEach(ingredient => {
                    if (Utils.isSpecialIngredient(ingredient)) {
                        const typeName = Utils.extractTypeName(ingredient);
                        if (typeName && !types.includes(typeName)) {
                            types.push(typeName);
                        }
                    }
                });
                return types;
            }
        };

        // Main application class
        class RecipeApp {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateStats();
                this.renderRecipes();
            }

            setupEventListeners() {
                // Search input
                const searchInput = document.getElementById('searchInput');
                let searchTimeout;
                searchInput.addEventListener('input', (e) => {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        this.handleSearch(e.target.value);
                    }, 300);
                });

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.handleCategoryFilter(e.target.dataset.category);
                    });
                });

                // Dark mode toggle
                this.setupDarkModeToggle();
            }

            /**
             * Setup dark mode toggle functionality
             */
            setupDarkModeToggle() {
                const darkModeToggle = document.getElementById('darkModeToggle');
                if (!darkModeToggle) return;

                // Initialize theme from localStorage or default to light
                const savedTheme = localStorage.getItem('darkMode');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');
                
                this.setTheme(initialTheme);

                // Toggle event listener
                darkModeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    this.setTheme(newTheme);
                });

                // Listen for system theme changes
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    if (!localStorage.getItem('darkMode')) {
                        this.setTheme(e.matches ? 'dark' : 'light');
                    }
                });
            }

            /**
             * Set the theme and save to localStorage
             * @param {string} theme - 'light' or 'dark'
             */
            setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('darkMode', theme);
                
                // Update toggle button icon
                const toggleIcon = document.querySelector('.dark-mode-toggle .toggle-icon');
                if (toggleIcon) {
                    toggleIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                }
            }

            handleSearch(searchTerm) {
                AppState.searchTerm = searchTerm.trim();
                this.filterRecipes();
            }

            handleCategoryFilter(category) {
                AppState.selectedCategory = category;
                
                // Update button states
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-category="${category}"]`).classList.add('active');
                
                this.filterRecipes();
            }

            filterRecipes() {
                const searchTerm = AppState.searchTerm.toLowerCase();
                const category = AppState.selectedCategory;
                
                AppState.filteredRecipes = Object.keys(recipeData).filter(recipeName => {
                    const recipe = recipeData[recipeName];
                    
                    // Category filter
                    if (category !== 'all' && recipe.category !== category) {
                        return false;
                    }
                    
                    // Search filter
                    if (searchTerm) {
                        // Search in recipe name
                        if (recipeName.toLowerCase().includes(searchTerm)) {
                            return true;
                        }
                        
                        // Search in ingredients (including expanded type ingredients)
                        const ingredients = recipe.Requires.Ingredients || {};
                        for (const ingredientList of Object.values(ingredients)) {
                            // Expand the ingredient list to include type-based ingredients
                            const expandedList = Utils.expandIngredientList(ingredientList);
                            
                            if (expandedList.some(ingredient => 
                                ingredient.toLowerCase().includes(searchTerm)
                            )) {
                                return true;
                            }
                        }
                        
                        return false;
                    }
                    
                    return true;
                });
                
                this.renderRecipes();
                this.updateStats();
                
                // Clear selection if selected recipe is no longer visible
                if (AppState.selectedRecipe && !AppState.filteredRecipes.includes(AppState.selectedRecipe)) {
                    this.clearSelection();
                }
            }

            renderRecipes() {
                const grid = document.getElementById('recipeGrid');
                grid.innerHTML = '';
                
                AppState.filteredRecipes.forEach(recipeName => {
                    const recipe = recipeData[recipeName];
                    const card = this.createRecipeCard(recipeName, recipe);
                    grid.appendChild(card);
                });
            }

            createRecipeCard(recipeName, recipe) {
                const card = document.createElement('div');
                card.className = 'recipe-card';
                card.setAttribute('data-category', recipe.category);
                
                if (AppState.selectedRecipe === recipeName) {
                    card.classList.add('selected');
                }
                
                const ingredientCount = Utils.getIngredientCount(recipe);
                const ingredients = recipe.Requires.Ingredients || {};
                
                // Create preview of ingredient types
                const ingredientTypes = Object.keys(ingredients).slice(0, 3);
                const previewTags = ingredientTypes.map(type => 
                    `<span class="ingredient-tag">${Utils.highlightText(type, AppState.searchTerm)}</span>`
                ).join('');
                
                const remainingCount = Math.max(0, Object.keys(ingredients).length - 3);
                const moreTag = remainingCount > 0 ? 
                    `<span class="ingredient-tag">+${remainingCount} more</span>` : '';

                card.innerHTML = `
                    <div class="recipe-header">
                        <h3 class="recipe-name">
                            <span class="recipe-emoji">${recipe.emoji}</span>
                            ${Utils.highlightText(recipeName, AppState.searchTerm)}
                            ${Utils.getDifficultyBadge(recipe.difficulty)}
                        </h3>
                        <div class="ingredient-count">${ingredientCount}</div>
                    </div>
                    <div class="ingredient-preview">
                        ${previewTags}
                        ${moreTag}
                    </div>
                `;

                card.addEventListener('click', () => {
                    this.selectRecipe(recipeName);
                });

                return card;
            }

            selectRecipe(recipeName) {
                // Update state
                AppState.selectedRecipe = recipeName;
                
                // Update visual selection
                document.querySelectorAll('.recipe-card').forEach(card => {
                    card.classList.remove('selected');
                });
                document.querySelector(`[data-category="${recipeData[recipeName].category}"]`).classList.add('selected');
                
                // Show recipe details
                this.showRecipeDetails(recipeName);
                this.updateStats();
            }

            showRecipeDetails(recipeName) {
                const recipe = recipeData[recipeName];
                const detailsDiv = document.getElementById('recipeDetails');
                const titleElement = document.getElementById('detailsTitle');
                const sectionsElement = document.getElementById('ingredientSections');
                
                // Get the color for this recipe category
                const categoryColors = {
                    'main': 'rgb(231, 76, 60)',
                    'snack': 'rgb(241, 196, 15)',
                    'dessert': 'rgb(155, 89, 182)',
                    'drink': 'rgb(52, 152, 219)',
                    'salad': 'rgb(46, 204, 113)'
                };
                
                const categoryColor = categoryColors[recipe.category] || 'rgb(76, 175, 80)';
                
                // Update the details section styling
                detailsDiv.style.borderLeftColor = categoryColor;
                detailsDiv.style.background = categoryColor.replace('rgb', 'rgba').replace(')', ', 0.05)');
                titleElement.style.color = categoryColor;
                
                titleElement.innerHTML = `
                    ${recipe.emoji} ${recipeName} Recipe
                    ${Utils.getDifficultyBadge(recipe.difficulty)}
                    <small style="font-size: 0.8em; color: var(--text-secondary); font-weight: normal;">
                        (Requires ${recipe.Requires.Count} ingredients)
                    </small>
                `;
                
                // Clear and populate ingredient sections
                sectionsElement.innerHTML = '';
                
                const ingredients = recipe.Requires.Ingredients || {};
                Object.entries(ingredients).forEach(([ingredientType, ingredientList]) => {
                    const section = document.createElement('div');
                    section.className = 'ingredient-section';
                    
                    // Check if this ingredient list contains type-based ingredients
                    const hasTypes = Utils.hasTypeIngredients(ingredientList);
                    
                    if (hasTypes) {
                        // Show both original type requirement and expanded list
                        const typeSummary = Utils.getTypeSummary(ingredientList);
                        const expandedList = Utils.expandIngredientList(ingredientList);
                        
                        // Create type summary for display
                        const typeDisplay = typeSummary.map(type => 
                            `<span class="ingredient-item special">${type} type plants</span>`
                        ).join('');
                        
                        // Create expanded ingredient items
                        const ingredientItems = expandedList.map(ingredient => {
                            const isFromType = typeSummary.some(type => 
                                fruitTypesData[type] && fruitTypesData[type].includes(ingredient)
                            );
                            const isOriginal = ingredientList.includes(ingredient);
                            
                            let className = 'ingredient-item';
                            if (isFromType && !isOriginal) {
                                className += ' from-type';
                            } else if (Utils.isSpecialIngredient(ingredient)) {
                                className += ' special';
                            }
                            
                            return `<div class="${className}">${Utils.highlightText(ingredient, AppState.searchTerm)}</div>`;
                        }).join('');
                        
                        section.innerHTML = `
                            <h4>${ingredientType} (choose 1):</h4>
                            <div class="type-summary" style="margin-bottom: 10px;">
                                ${typeDisplay}
                            </div>
                            <div class="ingredient-list">
                                ${ingredientItems}
                            </div>
                        `;
                    } else {
                        // Standard ingredient list
                        const ingredientItems = ingredientList.map(ingredient => {
                            const isSpecial = Utils.isSpecialIngredient(ingredient);
                            const className = isSpecial ? 'ingredient-item special' : 'ingredient-item';
                            return `<div class="${className}">${Utils.highlightText(ingredient, AppState.searchTerm)}</div>`;
                        }).join('');
                        
                        section.innerHTML = `
                            <h4>${ingredientType} (choose 1):</h4>
                            <div class="ingredient-list">
                                ${ingredientItems}
                            </div>
                        `;
                    }
                    
                    sectionsElement.appendChild(section);
                });
                
                // Handle special case for Soup
                if (recipeName === 'Soup') {
                    sectionsElement.innerHTML = `
                        <div class="ingredient-section">
                            <h4>Any Single Ingredient:</h4>
                            <div class="ingredient-list">
                                <div class="ingredient-item special">Any fruit, vegetable, or plant from your garden</div>
                            </div>
                        </div>
                    `;
                }
                
                // Show the details section
                detailsDiv.classList.add('show');
                
                // Scroll to details
                detailsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            clearSelection() {
                AppState.selectedRecipe = null;
                document.querySelectorAll('.recipe-card').forEach(card => {
                    card.classList.remove('selected');
                });
                document.getElementById('recipeDetails').classList.remove('show');
                this.updateStats();
            }

            updateStats() {
                document.getElementById('totalRecipes').textContent = Object.keys(recipeData).length;
                document.getElementById('selectedRecipe').textContent = AppState.selectedRecipe || 'None';
                document.getElementById('filteredCount').textContent = AppState.filteredRecipes.length;
                document.getElementById('avgIngredients').textContent = Utils.getAverageIngredientCount();
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new RecipeApp();
        });
    </script>
</body>
</html>